<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Manager - Tasks</title>
    <link rel="stylesheet" href="/styles.css" />
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle">
        <span id="themeIcon">🌙</span>
        <span id="themeText">Dark</span>
    </button>

    <div class="container">
        <header class="header">
            <div class="header-left">
                <h1>📋 Your Tasks</h1>
                <span id="taskCount" class="task-count"></span>
            </div>
            <div class="header-actions">
                <button id="showAddTaskBtn" class="btn-success">➕ New Task</button>
                <button id="logoutBtn" class="btn-danger">Logout</button>
            </div>
        </header>

        <!-- Filter & Search Section - Now at the top -->
        <section class="controls filter-section">
            <div class="filter-header">
                <h3>🔍 Filter & Search Tasks</h3>
                <span class="filter-hint">Find and organize your tasks</span>
            </div>
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="search">Search</label>
                    <input type="text" id="search" placeholder="Search by title..." />
                </div>
                <div class="filter-group">
                    <label for="filterStatus">Status</label>
                    <select id="filterStatus">
                        <option value="">All Status</option>
                        <option value="Pending">⏳ Pending</option>
                        <option value="In Progress">🔄 In Progress</option>
                        <option value="Done">✅ Done</option>
                    </select>
                </div>
                <div class="filter-actions">
                    <button id="applyFilters" class="btn-primary">🔍 Search</button>
                    <button id="clearFilters" class="btn-secondary">🔄 Reset</button>
                </div>
            </div>
        </section>

        <!-- Add Task Form - Collapsible -->
        <section class="controls add-task-section" id="addTaskSection" style="display: none;">
            <div class="section-header">
                <h3>➕ Add New Task</h3>
                <button id="closeAddTaskBtn" class="btn-icon">✖</button>
            </div>
            <form id="taskForm" class="task-form-grid">
                <div class="form-group">
                    <label for="title">Task Title *</label>
                    <input type="text" id="title" placeholder="e.g., Complete project documentation" required />
                </div>
                <div class="form-group">
                    <label for="estimatedHours">Estimated Hours *</label>
                    <input type="number" id="estimatedHours" placeholder="0.0" min="0" step="0.1" required />
                </div>
                <div class="form-group">
                    <label for="actualHours">Actual Hours *</label>
                    <input type="number" id="actualHours" placeholder="0.0" min="0" step="0.1" required />
                </div>
                <div class="form-group">
                    <label for="status">Status</label>
                    <select id="status">
                        <option>Pending</option>
                        <option>In Progress</option>
                        <option>Done</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-success">✓ Add Task</button>
                    <button type="button" id="cancelAddTaskBtn" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </section>

        <section class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Completed</th>
                        <th>Est. Hours</th>
                        <th>Act. Hours</th>
                        <th>Efficiency %</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="tasksBody"></tbody>
            </table>
            <div id="emptyState" class="empty-state" style="display: none;">
                <div style="font-size: 64px; margin-bottom: 16px;">📭</div>
                <h3>No tasks found</h3>
                <p>Create your first task to get started!</p>
            </div>
            <div class="pagination" id="pagination"></div>
            <p id="tasksMessage" class="message"></p>
        </section>
    </div>

    <script src="/script.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('token');
            if (!token) window.location.href = '/';
        });
    </script>
</body>
</html>


